-- Generated by Oracle SQL Developer Data Modeler 23.1.0.087.0806
--   at:        2024-01-15 18:22:14 CET
--   site:      Oracle Database 11g
--   type:      Oracle Database 11g



-- predefined type, no DDL - MDSYS.SDO_GEOMETRY

-- predefined type, no DDL - XMLTYPE

CREATE TABLE iznajmljivac (
    id_i    INTEGER NOT NULL,
    ime_i   VARCHAR2(20),
    prz_i   VARCHAR2(20),
    naziv_p VARCHAR2(25) NOT NULL
);

ALTER TABLE iznajmljivac ADD CONSTRAINT iznajmljivac_pk PRIMARY KEY ( id_i );

CREATE TABLE iznajmljuje (
    id_i             INTEGER NOT NULL,
    datum_vreme_z    DATE NOT NULL,
    id_k             INTEGER NOT NULL,
    id_racun         INTEGER NOT NULL,
    naziv_p          VARCHAR2(25) NOT NULL,
    naziv_kategorije VARCHAR2(25) NOT NULL
);

ALTER TABLE iznajmljuje ADD CONSTRAINT iznajmljuje_pk PRIMARY KEY ( id_i,
                                                                    datum_vreme_z );

CREATE TABLE kategorija (
    naziv_kategorije VARCHAR2(25) NOT NULL
);

ALTER TABLE kategorija ADD CONSTRAINT kategorija_pk PRIMARY KEY ( naziv_kategorije );

CREATE TABLE kostim (
    id_k    INTEGER NOT NULL,
    naziv_k VARCHAR2(25),
    naziv_p VARCHAR2(25) NOT NULL
);

ALTER TABLE kostim ADD CONSTRAINT kostim_pk PRIMARY KEY ( id_k,
                                                          naziv_p );

CREATE TABLE krojac (
    id_r   INTEGER NOT NULL,
    id_r_1 INTEGER NOT NULL
);

ALTER TABLE krojac ADD CONSTRAINT krojac_pk PRIMARY KEY ( id_r );

CREATE TABLE pripada (
    naziv_kategorije VARCHAR2(25) NOT NULL,
    id_k             INTEGER NOT NULL,
    naziv_p          VARCHAR2(25) NOT NULL
);

ALTER TABLE pripada
    ADD CONSTRAINT pripada_pk PRIMARY KEY ( id_k,
                                            naziv_p,
                                            naziv_kategorije );

CREATE TABLE prodavac (
    id_r INTEGER NOT NULL
);

ALTER TABLE prodavac ADD CONSTRAINT prodavac_pk PRIMARY KEY ( id_r );

CREATE TABLE prodavnica (
    naziv_p VARCHAR2(25) NOT NULL,
    adr_p   VARCHAR2(20),
    tel_p   INTEGER,
    email_p VARCHAR2(25)
);

ALTER TABLE prodavnica ADD CONSTRAINT prodavnica_pk PRIMARY KEY ( naziv_p );

CREATE TABLE racun (
    id_racun    INTEGER NOT NULL,
    vreme_dat_r DATE,
    id_r        INTEGER NOT NULL
);

ALTER TABLE racun ADD CONSTRAINT racun_pk PRIMARY KEY ( id_racun );

CREATE TABLE radnik (
    id_r    INTEGER NOT NULL,
    ime_r   VARCHAR2(20),
    prz_r   VARCHAR2(20),
    tel_r   INTEGER,
    email_r VARCHAR2(25),
    naziv_p VARCHAR2(25) NOT NULL
);

ALTER TABLE radnik ADD CONSTRAINT radnik_pk PRIMARY KEY ( id_r );

CREATE TABLE relation_4 (
    id_r    INTEGER NOT NULL,
    id_k    INTEGER NOT NULL,
    naziv_p VARCHAR2(25) NOT NULL
);

ALTER TABLE relation_4
    ADD CONSTRAINT relation_4_pk PRIMARY KEY ( id_r,
                                               id_k,
                                               naziv_p );

CREATE TABLE zajam (
    datum_vreme_z DATE NOT NULL
);

ALTER TABLE zajam ADD CONSTRAINT zajam_pk PRIMARY KEY ( datum_vreme_z );

ALTER TABLE iznajmljivac
    ADD CONSTRAINT iznajmljivac_prodavnica_fk FOREIGN KEY ( naziv_p )
        REFERENCES prodavnica ( naziv_p );

ALTER TABLE iznajmljuje
    ADD CONSTRAINT iznajmljuje_iznajmljivac_fk FOREIGN KEY ( id_i )
        REFERENCES iznajmljivac ( id_i );

ALTER TABLE iznajmljuje
    ADD CONSTRAINT iznajmljuje_pripada_fk FOREIGN KEY ( id_k,
                                                        naziv_p,
                                                        naziv_kategorije )
        REFERENCES pripada ( id_k,
                             naziv_p,
                             naziv_kategorije );

ALTER TABLE iznajmljuje
    ADD CONSTRAINT iznajmljuje_racun_fk FOREIGN KEY ( id_racun )
        REFERENCES racun ( id_racun );

ALTER TABLE iznajmljuje
    ADD CONSTRAINT iznajmljuje_zajam_fk FOREIGN KEY ( datum_vreme_z )
        REFERENCES zajam ( datum_vreme_z );

ALTER TABLE kostim
    ADD CONSTRAINT kostim_prodavnica_fk FOREIGN KEY ( naziv_p )
        REFERENCES prodavnica ( naziv_p );

ALTER TABLE krojac
    ADD CONSTRAINT krojac_krojac_fk FOREIGN KEY ( id_r_1 )
        REFERENCES krojac ( id_r );

ALTER TABLE krojac
    ADD CONSTRAINT krojac_radnik_fk FOREIGN KEY ( id_r )
        REFERENCES radnik ( id_r );

ALTER TABLE pripada
    ADD CONSTRAINT pripada_kategorija_fk FOREIGN KEY ( naziv_kategorije )
        REFERENCES kategorija ( naziv_kategorije );

ALTER TABLE pripada
    ADD CONSTRAINT pripada_kostim_fk FOREIGN KEY ( id_k,
                                                   naziv_p )
        REFERENCES kostim ( id_k,
                            naziv_p );

ALTER TABLE prodavac
    ADD CONSTRAINT prodavac_radnik_fk FOREIGN KEY ( id_r )
        REFERENCES radnik ( id_r );

ALTER TABLE racun
    ADD CONSTRAINT racun_prodavac_fk FOREIGN KEY ( id_r )
        REFERENCES prodavac ( id_r );

ALTER TABLE radnik
    ADD CONSTRAINT radnik_prodavnica_fk FOREIGN KEY ( naziv_p )
        REFERENCES prodavnica ( naziv_p );

ALTER TABLE relation_4
    ADD CONSTRAINT relation_4_kostim_fk FOREIGN KEY ( id_k,
                                                      naziv_p )
        REFERENCES kostim ( id_k,
                            naziv_p );

ALTER TABLE relation_4
    ADD CONSTRAINT relation_4_krojac_fk FOREIGN KEY ( id_r )
        REFERENCES krojac ( id_r );




-- Oracle SQL Developer Data Modeler Summary Report: 
-- 
-- CREATE TABLE                            12
-- CREATE INDEX                             0
-- ALTER TABLE                             27
-- CREATE VIEW                              0
-- ALTER VIEW                               0
-- CREATE PACKAGE                           0
-- CREATE PACKAGE BODY                      0
-- CREATE PROCEDURE                         0
-- CREATE FUNCTION                          0
-- CREATE TRIGGER                           0
-- ALTER TRIGGER                            0
-- CREATE COLLECTION TYPE                   0
-- CREATE STRUCTURED TYPE                   0
-- CREATE STRUCTURED TYPE BODY              0
-- CREATE CLUSTER                           0
-- CREATE CONTEXT                           0
-- CREATE DATABASE                          0
-- CREATE DIMENSION                         0
-- CREATE DIRECTORY                         0
-- CREATE DISK GROUP                        0
-- CREATE ROLE                              0
-- CREATE ROLLBACK SEGMENT                  0
-- CREATE SEQUENCE                          0
-- CREATE MATERIALIZED VIEW                 0
-- CREATE MATERIALIZED VIEW LOG             0
-- CREATE SYNONYM                           0
-- CREATE TABLESPACE                        0
-- CREATE USER                              0
-- 
-- DROP TABLESPACE                          0
-- DROP DATABASE                            0
-- 
-- REDACTION POLICY                         0
-- 
-- ORDS DROP SCHEMA                         0
-- ORDS ENABLE SCHEMA                       0
-- ORDS ENABLE OBJECT                       0
-- 
-- ERRORS                                   0
-- WARNINGS                                 0
